<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ray Timer</title>

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", sans-serif;
        transition:
          background 0.3s,
          color 0.3s;
      }

      body {
        background: #f5f7fa;
        color: #333;
      }

      /* Dark Mode */
      body.dark {
        background: #0f172a;
        color: #e2e8f0;
      }

      body.dark header {
        background: #1e293b;
      }

      body.dark .feature-box {
        background: #1e293b;
        box-shadow: none;
      }

      body.dark footer {
        background: #020617;
      }

      body.dark nav a {
        color: #cbd5e1;
      }

      body.dark nav a:hover {
        color: #818cf8;
      }

      /* Header */
      header {
        background: white;
        padding: 20px 10%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      }

      .logo {
        font-size: 24px;
        font-weight: bold;
        color: #4f46e5;
      }

      nav a {
        margin-left: 25px;
        text-decoration: none;
        color: #555;
        font-weight: 500;
      }

      .toggle-btn {
        margin-left: 25px;
        padding: 6px 14px;
        border-radius: 20px;
        border: none;
        cursor: pointer;
        background: #4f46e5;
        color: white;
      }

      /* Hero */
      .hero {
        min-height: 90vh;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        text-align: center;
        padding: 20px;

        background: linear-gradient(to right, var(--accent), var(--bgcolor));

        transition: background 0.5s ease;
      }

      .timer-container h1 {
        font-size: 40px;
        margin-bottom: 20px;
      }

      #timer {
        font-size: 60px;
        font-weight: bold;
        margin: 20px 0;
      }

      .hero button {
        padding: 10px 25px;
        border: none;
        border-radius: 20px;
        background: white;
        color: #4f46e5;
        font-size: 16px;
        cursor: pointer;
        margin-top: 15px;
      }
      .hero button,
      .settings-btn,
      .toggle-btn {
        background: var(--accent);
      }

      .times-list {
        margin-top: 30px;
      }

      .times-list ul {
        list-style: none;
        padding: 0;
      }

      .times-list li {
        margin: 5px 0;
        font-size: 18px;
      }

      /* Features */
      .features {
        padding: 80px 10%;
        text-align: center;
      }

      .features h2 {
        font-size: 36px;
        margin-bottom: 50px;
      }

      .feature-container {
        display: flex;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 30px;
      }

      .feature-box {
        background: white;
        padding: 30px;
        flex: 1 1 30%;
        border-radius: 10px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
      }

      .feature-box h3 {
        margin-bottom: 15px;
        color: #4f46e5;
      }

      /* Footer */
      footer {
        background: #111827;
        color: white;
        text-align: center;
        padding: 20px;
        margin-top: 50px;
      }

      /* Responsive */
      @media (max-width: 900px) {
        .feature-container {
          flex-direction: column;
        }

        .hero h1 {
          font-size: 32px;
        }
      }
      :root {
        --accent: #4f46e5;
        --bgcolor: #f5f7fa;
      }

      body {
        background: var(--bgcolor);
      }

      /* Navbar buttons */
      .settings-btn {
        margin-left: 10px;
        padding: 6px 14px;
        border-radius: 20px;
        border: none;
        cursor: pointer;
        background: var(--accent);
        color: white;
      }
      #acceptBtn {
        background: var(--accent);
        color: white;
        border-radius: 8px;
        padding: 8px;
        cursor: pointer;
      }

      #acceptBtn:hover {
        filter: brightness(0.9);
      }

      .settings-panel {
        position: absolute;
        top: 80px;
        right: 10%;
        background: white;
        padding: 20px;
        width: 260px;
        border-radius: 12px;
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        display: flex;
        flex-direction: column;
        gap: 12px;
        z-index: 1000;

        /* Animation */
        opacity: 0;
        transform: translateY(-20px);
        pointer-events: none;
        transition: all 0.35s ease;
      }

      /* When Open */
      .settings-panel.active {
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
      }

      /* Dark Mode Panel */
      body.dark .settings-panel {
        background: #1e293b;
        color: white;
      }
      #deleteAllBtn {
    background: var(--accent);
    color: white;
    border-radius: 8px;
    padding: 6px 12px;
    margin-top: 10px;
    cursor: pointer;
}

#deleteAllBtn:hover {
    filter: brightness(0.9);
}

    </style>
  </head>
  <body>
    <header>
      <div class="logo">Ray Timer</div>
      <nav>
        <a href="index.html">Home</a>
        <a href="login.html">Login</a>
        <a href="signup.html">Sign Up</a>
        <button class="toggle-btn" onclick="toggleDarkMode()">üåô Dark</button>
        <button class="settings-btn" onclick="toggleSettings()">‚öôÔ∏è</button>
      </nav>
    </header>
    <div id="settings-panel" class="settings-panel">
      <h3>Settings</h3>

      <label>Accent Color</label>
      <input type="color" id="accentPicker" />

      <label>Background Color</label>
      <input type="color" id="bgPicker" />

      <label>Background Image</label>
      <input type="file" id="bgImagePicker" accept="image/*" />

      <button onclick="resetSettings()">Reset</button>
      <button id="acceptBtn">Accept</button>
    </div>

    <section class="hero">
      <div class="timer-container">
        <h1>Rubik's Cube Timer</h1>
        <div id="timer">00:00.000</div>
        <p>Press SPACE to start/stop</p>
        <button onclick="resetTimes()">Reset Times</button>

        <div class="times-list">
    <h3>Previous Times</h3>
    <ul id="times"></ul>
    <button id="deleteAllBtn">Delete All</button>
</div>

    </section>

    <script>
      function toggleDarkMode() {
        document.body.classList.toggle("dark");

        if (document.body.classList.contains("dark")) {
          localStorage.setItem("theme", "dark");
        } else {
          localStorage.setItem("theme", "light");
        }
      }

      // Load saved theme
      if (localStorage.getItem("theme") === "dark") {
        document.body.classList.add("dark");
      }

      function resetTimes() {
        times = [];
        document.getElementById("times").innerHTML = "";
        document.getElementById("timer").textContent = "00:00.000";
      }
    </script>
    <script>
      let startTime;
      let interval;
      let running = false;
      let ready = false;
      let holding = false;
      let holdTimeout;

      const timerDisplay = document.getElementById("timer");
      const timesList = document.getElementById("times");

      function formatTime(ms) {
        let milliseconds = ms % 1000;
        let seconds = Math.floor(ms / 1000) % 60;
        let minutes = Math.floor(ms / 60000);

        return (
          (minutes < 10 ? "0" : "") +
          minutes +
          ":" +
          (seconds < 10 ? "0" : "") +
          seconds +
          "." +
          milliseconds.toString().padStart(3, "0")
        );
      }

      function updateTimer() {
        const now = Date.now();
        const elapsed = now - startTime;
        timerDisplay.textContent = formatTime(elapsed);
      }

      // HOLD SPACE (ARM TIMER)
      document.addEventListener("keydown", function (e) {
        if (e.code === "Space" && !holding) {
          e.preventDefault();
          holding = true;

          if (!running) {
            timerDisplay.style.color = "red";

            holdTimeout = setTimeout(() => {
              ready = true;
              timerDisplay.style.color = "lime";
            }, 500); // hold time before ready
          }
        }
      });

      // RELEASE SPACE
      document.addEventListener("keyup", function (e) {
        if (e.code === "Space") {
          e.preventDefault();
          holding = false;

          if (!running && ready) {
            // START TIMER
            startTime = Date.now();
            interval = setInterval(updateTimer, 10);
            running = true;
            ready = false;
            timerDisplay.style.color = "white";
          } else if (running) {
            // STOP TIMER
            clearInterval(interval);
            running = false;

            const finalTime = timerDisplay.textContent;
            const li = document.createElement("li");
            li.textContent = finalTime;
            timesList.prepend(li);

            timerDisplay.style.color = "white";
          }

          clearTimeout(holdTimeout);
          timerDisplay.style.color = running ? "white" : "white";
        }
      });

      function resetTimes() {
        timesList.innerHTML = "";
        timerDisplay.textContent = "00:00.000";
        
        const deleteAllBtn = document.getElementById("deleteAllBtn");

deleteAllBtn.addEventListener("click", function() {
    if (confirm("Are you sure you want to delete all previous times?")) {
        document.getElementById("times").innerHTML = "";
    }
});

      }
    </script>
    
    <script>
      const settingsPanel = document.getElementById("settings-panel");
      const accentPicker = document.getElementById("accentPicker");
      const bgPicker = document.getElementById("bgPicker");
      const bgImagePicker = document.getElementById("bgImagePicker");

      function toggleSettings() {
        settingsPanel.classList.toggle("active");
      }

      // Accent Color Change
      accentPicker.addEventListener("input", function () {
        document.documentElement.style.setProperty("--accent", this.value);
        localStorage.setItem("accent", this.value);
      });

      // Background Color Change
      bgPicker.addEventListener("input", function () {
        document.body.style.backgroundImage = "none";
        document.documentElement.style.setProperty("--bgcolor", this.value);

        document.body.style.transition = "background 0.5s ease";
        localStorage.setItem("bgcolor", this.value);
        localStorage.removeItem("bgimage");
      });

      // Background Image Upload
      bgImagePicker.addEventListener("change", function (e) {
        const file = e.target.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = function (event) {
          document.body.style.backgroundImage = `url(${event.target.result})`;
          document.body.style.backgroundSize = "cover";
          document.body.style.backgroundPosition = "center";
          localStorage.setItem("bgimage", event.target.result);
        };
        reader.readAsDataURL(file);
      });

      // Reset Settings
      function resetSettings() {
        localStorage.removeItem("accent");
        localStorage.removeItem("bgcolor");
        localStorage.removeItem("bgimage");
        location.reload();
      }

      // Load Saved Settings
      window.addEventListener("load", function () {
        const savedAccent = localStorage.getItem("accent");
        const savedBg = localStorage.getItem("bgcolor");
        const savedImage = localStorage.getItem("bgimage");

        if (savedAccent) {
          document.documentElement.style.setProperty("--accent", savedAccent);
        }

        if (savedBg) {
          document.documentElement.style.setProperty("--bgcolor", savedBg);
        }

        if (savedImage) {
          document.body.style.backgroundImage = `url(${savedImage})`;
          document.body.style.backgroundSize = "cover";
          document.body.style.backgroundPosition = "center";
        }
        const acceptBtn = document.getElementById("acceptBtn");

        acceptBtn.addEventListener("click", function () {
          // Apply accent color
          document.documentElement.style.setProperty(
            "--accent",
            accentPicker.value,
          );
          localStorage.setItem("accent", accentPicker.value);

          // Apply background color
          document.body.style.backgroundImage = "none";
          document.documentElement.style.setProperty(
            "--bgcolor",
            bgPicker.value,
          );
          localStorage.setItem("bgcolor", bgPicker.value);
          localStorage.removeItem("bgimage");

          // Close panel
          settingsPanel.classList.remove("active");
        });
      });
    </script>
  </body>
</html>
`
